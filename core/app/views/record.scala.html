@(viewModel: models.RecordViewModel )


<!DOCTYPE html>

<html lang="en">
    <body>
        <div class="body">
            @header()
            <ol class="breadcrumb">
              <li><a href="/">Open Eval</a></li>
              <li><a href="/configuration?conf=@viewModel.record.configuration_id">
                <!-- should change to get name from db -->
                Configuration @viewModel.record.configuration_id
              </a></li>
              <li><a href="/record?record_id=@viewModel.record.record_id">
                Record @viewModel.record.record_id
              </a></li>
            </ol>

            @if(viewModel.record.isRunning) {
            <h5><center><i><div id="database"></div></i></center></h5>

            <div class="progress" id="progressouter">
                <div class="progress-bar" id="progress"></div>
            </div>
            <div>
               <table style='display:inline-block'>
                    <tr>
                       <td>
                        <div id="completed">0</div>
                        <td> <div> &nbsp; of &nbsp; </div> </td>
                       </td>
                       <td>
                        <div id="total">0</div> 
                        <td> <div>  &nbsp; Text Annotations complete. </div>
                       </td>
                    </tr>
               </table>
            </div>
            <div>
                <table style='display:inline-block'>
                    <tr>
                        <td>
                        <div id="skipped">0</div>
                        </td>
                        <td>
                        <div> &nbsp; errors. </div>
                        </td>
                    </tr>
                </table>
            </div>

            <script src="http://code.jquery.com/jquery.js"></script>
            <script type="text/javascript">
                $(document).ready(function(){
                  var progresspump = setInterval(function(){
                  // Query the completion percentage from the server.
                  $.get("/working/prog?record=@viewModel.record.record_id", function(data){
                    // Extract JSON data.
                    var progress_info = data;
                    var percent = progress_info.percent_complete;
                    var completed = progress_info.completed;
                    var skipped = progress_info.skipped;
                    var total = progress_info.total;
                    var error = progress_info.error;
                    $("#progress").css('width',percent+'%');
                    $("#progress").html(percent+'%');
                    // If no Text Annotations have been completed, notify the user that the instances are
                    // being pulled from the database.
                    if (completed == 0 && error === "") {
                      $("#database").html("Retrieving instances from database...");
                    } else if(error === ""){
                      $("#database").html("Your datasets are being processed. This may take a moment.");
                    } else {
                      $("#database").html(error).css('color', 'red');
                    }
                    $("#completed").html(completed);
                    $("#total").html(total);
                    $("#skipped").html(skipped);
          /* go to evaluation page. */
                    
                  })
                }, 1000);});
         </script>}
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th class="col-md-4">Metrics</th>
                    <th class="col-md-8">Metric Values</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      precision
                    </td>
                    <td>
                      @viewModel.record.metrics.precision
                    </td>
                  </tr>
                  <tr>
                    <td>
                      recall
                    </td>
                    <td>
                      @viewModel.record.metrics.recall
                    </td>
                  </tr>
                  <tr>
                    <td>
                      f1
                    </td>
                    <td>
                      @viewModel.record.metrics.f1
                    </td>
                  </tr>
                  <tr>
                    <td>
                      Average Solve Time
                    </td>
                    <td>
                      @viewModel.record.metrics.averageSolveTime
                    </td>
                  </tr>
                  <tr>
                    <td>
                      
                    </td>
                    <td>
                      
                    </td>
                  </tr>
                  <tr>
                    <td>
                      gold count
                    </td>
                    <td>
                      @viewModel.record.metrics.gold_count
                    </td>
                  </tr>
                  <tr>
                    <td>
                      correct count
                    </td>
                    <td>
                      @viewModel.record.metrics.correct_count
                    </td>
                  </tr>
                  <tr>
                    <td>
                      predicted count
                    </td>
                    <td>
                      @viewModel.record.metrics.predicted_count
                    </td>
                  </tr>
                  <tr>
                    <td>
                      missed count
                    </td>
                    <td>
                      @viewModel.record.metrics.missed_count
                    </td>
                  </tr>
                  <tr>
                    <td>
                      extra count
                    </td>
                    <td>
                      @viewModel.record.metrics.extra_count
                    </td>
                  </tr>
                  <tr>
                    <td>
                      
                    </td>
                    <td>
                      
                    </td>
                  </tr>
                  <tr>
                    <td>
                      record id
                    </td>
                    <td>
                      @viewModel.record.record_id
                    </td>
                  </tr>
                  <tr>
                    <td>
                      associated configuration id
                    </td>
                    <td>
                      <a href="/configuration?conf=@viewModel.record.configuration_id">
                        @viewModel.record.configuration_id
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      finished
                    </td>
                    <td>
                      @(!viewModel.record.isRunning)
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
        <form action="/deleteRecord" method="post">
          <input type="hidden"
           name="record_id"
           value="@viewModel.record.record_id" />
          <input type="hidden"
           name="configuration_id"
           value="@viewModel.record.configuration_id" />
          <input type="submit" 
            rel="facebox[.dangerzone]" 
            class="btn btn-danger boxed-action"
            value="Delete this record"
            onclick="return confirm('Are you sure you want to delete this item?');"
          />
        </form>
      </div>
    </body>
</html>
